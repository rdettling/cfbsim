{% extends 'base.html' %}
{% load static %}
{% block title %} {{team.name}} dashboard{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'dashboard.css' %}">
{% endblock %}

{% block content %}
    <div id='teamheader' class="mt-3 mb-3 text-center">
        <h1 class="display-3">#{{team.ranking}} {{team.name}} {{team.mascot}}</h1>
        <h2 class="lead">{{team.conference}}</h2>
        <h2 class="lead">{{team.rating}} overall</h2>
        <h2 class="lead">{{team.totalWins}} - {{team.totalLosses}} ({{team.confWins}} - {{team.confLosses}})</h2>
    </div>

    <div class="row">
        <div class="col-md-4">
            {% for week in schedule %}
                {% if week.weekPlayed == info.currentWeek|add:"-1" %}
                    <div class="card" style="width: 24rem; margin-left: 20px;">
                        <div class="card-body">
                            <h5 class="card-title">Previous game</h5>
                            <h6 class="card-subtitle mb-2">
                                <img src='{% static week.opponent %}.png' class='teamlogo'>
                                <a href='teams/{{week.opponent}}/schedule.html' class='teamlink'>#{{week.ranking}} {{week.opponent}}</a> 
                                {{week.result}} ({{week.score}})
                            </h6>
                            <a href="/teams/{{team.name}}/schedule/{{week.gameNum}}.html" class="card-link">Summary</a>
                        </div>
                    </div>
                {% elif week.weekPlayed == info.currentWeek %}
                    <div class="card" style="width: 24rem; margin-left: 20px;">
                        <div class="card-body">
                            <h5 class="card-title">Next game</h5>
                            <h6 class="card-subtitle mb-2">
                                <img src='{% static week.opponent %}.png' class='teamlogo'>
                                <a href='teams/{{week.opponent}}/schedule.html' class='teamlink'>#{{week.ranking}} {{week.opponent}}</a> 
                                ({{week.spread}}, {{week.moneyline}})
                            </h6>
                            <a href="/teams/{{team.name}}/schedule/{{week.gameNum}}.html" class="card-link">Preview</a>
                        </div>
                    </div>
                {% endif %}
        {% endfor %}
        </div>
        <div class="col-md-4 text-center">
            <h2>{{team.conference}} Standings</h2>
            <table id='standings' class="table table-striped" style="border: 2px solid gray;">
                <thead>
                    <tr>
                    <th style="width: 10%">Conference Rank</th>
                    <th style="width: 40%">Team</th>
                    <th style="width: 10%">Conference Record</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team in confTeams %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>
                            <img src='{% static team.name %}.png' class='teamlogo'>
                            <a href='/teams/{{team.name}}/schedule.html' class='teamlink'>{{team.name}}</a> 
                        </td>
                        <td>{{team.confWins}}-{{team.confLosses}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-md-4 text-center">
            <h2>AP Top 10</h2>
            <table id='rankings' class="table table-striped" style="border: 2px solid gray;">
                <thead>
                    <tr>
                        <th style="width: 10%">Rank</th>
                        <th style="width: 40%">Team</th>
                        <th style="width: 10%">Record</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team in teams %}
                        {% if team.ranking < 11 %}
                            <tr>
                                <td>{{forloop.counter}}</td>
                                <td>
                                    <img src='{% static team.name %}.png' class='teamlogo'>
                                    <a href='/teams/{{team.name}}/schedule.html' class='teamlink'>{{team.name}}</a> 
                                </td>
                                <td>{{team.totalWins}}-{{team.totalLosses}}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}